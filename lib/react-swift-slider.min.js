'use strict';
var e = require('react'),
  t = require('prop-types'),
  n = require('styled-components');
function r(e) {
  return e && 'object' == typeof e && 'default' in e ? e : { default: e };
}
var i,
  o = r(e),
  a = r(t),
  u = r(n);
function l(e, t) {
  return (
    t || (t = e.slice(0)),
    Object.freeze(
      Object.defineProperties(e, { raw: { value: Object.freeze(t) } }),
    )
  );
}
function c(e, t) {
  return (
    (function (e) {
      if (Array.isArray(e)) return e;
    })(e) ||
    (function (e, t) {
      if ('undefined' == typeof Symbol || !(Symbol.iterator in Object(e)))
        return;
      var n = [],
        r = !0,
        i = !1,
        o = void 0;
      try {
        for (
          var a, u = e[Symbol.iterator]();
          !(r = (a = u.next()).done) && (n.push(a.value), !t || n.length !== t);
          r = !0
        );
      } catch (e) {
        (i = !0), (o = e);
      } finally {
        try {
          r || null == u.return || u.return();
        } finally {
          if (i) throw o;
        }
      }
      return n;
    })(e, t) ||
    (function (e, t) {
      if (!e) return;
      if ('string' == typeof e) return f(e, t);
      var n = Object.prototype.toString.call(e).slice(8, -1);
      'Object' === n && e.constructor && (n = e.constructor.name);
      if ('Map' === n || 'Set' === n) return Array.from(e);
      if (
        'Arguments' === n ||
        /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)
      )
        return f(e, t);
    })(e, t) ||
    (function () {
      throw new TypeError(
        'Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.',
      );
    })()
  );
}
function f(e, t) {
  (null == t || t > e.length) && (t = e.length);
  for (var n = 0, r = new Array(t); n < t; n++) r[n] = e[n];
  return r;
}
var d,
  s,
  h,
  g = u.default.li(
    i ||
      (i = l([
        '\n  background-position: center;\n  background-size: cover;\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  z-index: ',
        ';\n  opacity: ',
        ";\n  transition: opacity 1s linear;\n  background-image: url('",
        "');\n",
      ])),
    function (e) {
      return e.active ? '2' : '0';
    },
    function (e) {
      return e.active ? 1 : 0;
    },
    function (e) {
      return e.backgroundImage;
    },
  );
function v(e) {
  var t = e.src,
    n = e.active;
  return o.default.createElement(g, { backgroundImage: t, active: n });
}
var m,
  p = 'prev',
  b = 'next',
  y = u.default.div(
    d ||
      (d = l([
        '\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  display: flex;\n  justify-content: center;\n  z-index: 10;\n  padding: 0 2rem;\n  width: 30%;\n  height: ',
        'px;\n  cursor: pointer;\n  align-items: center;\n',
      ])),
    function (e) {
      return e.height;
    },
  ),
  x = u.default(y)(
    s ||
      (s = l([
        '\n  left: 0;\n  &:hover {\n    background: linear-gradient(to right, rgba(0, 0, 0, 0.5), transparent);\n  }\n',
      ])),
  ),
  k = u.default(y)(
    h ||
      (h = l([
        '\n  right: 0;\n  &:hover {\n    background: linear-gradient(to right, transparent, rgba(0, 0, 0, 0.5));\n  }\n',
      ])),
  );
function w(e) {
  var t = e.onPressNext,
    n = e.onPressPrev,
    r = e.direction,
    i = e.height;
  return r === p
    ? o.default.createElement(x, { onClick: n, height: i })
    : o.default.createElement(k, { onClick: t, height: i });
}
var C,
  E,
  P,
  j = u.default.li(
    m ||
      (m = l([
        '\n  width: 0.5rem;\n  height: 0.5rem;\n  border-radius: 20px;\n  margin: 0 1rem;\n  cursor: pointer;\n  background: ',
        ';\n',
      ])),
    function (e) {
      return e.background;
    },
  );
function A(e) {
  var t = e.active,
    n = e.onClick,
    r = e.idx,
    i = e.activeDotColor,
    a = e.dotColor;
  return o.default.createElement(j, {
    onClick: function () {
      return n(r);
    },
    background: t ? i : a,
  });
}
var D = u.default.div(
    C ||
      (C = l([
        '\n  position: relative;\n  height: ',
        'px;\n  @media (max-width: 600px) {\n    height: 250px;\n  }\n',
      ])),
    function (e) {
      return e.height || '450';
    },
  ),
  I = u.default.ul(
    E ||
      (E = l([
        '\n  position: relative;\n  padding: 0;\n  margin: 0;\n  list-style: none;\n  height: ',
        'px;\n  @media (max-width: 600px) {\n    height: 250px;\n  }\n',
      ])),
    function (e) {
      return e.height || '450';
    },
  ),
  S = u.default.ul(
    P ||
      (P = l([
        '\n  list-style: none;\n  margin: 1.7rem 0;\n  padding: 0;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  @media (max-width: 600px) {\n    margin: 1rem 0;\n  }\n',
      ])),
  );
function O(t) {
  var n = t.data,
    r = t.height,
    i = t.activeDotColor,
    a = t.interval,
    u = t.dotColor,
    l = t.showDots,
    f = t.enableNextAndPrev,
    d = c(e.useState(0), 2),
    s = d[0],
    h = d[1],
    g = c(e.useState(a), 2),
    m = g[0],
    y = g[1];
  !(function (t, n) {
    var r = e.useRef();
    e.useEffect(function () {
      r.current = t;
    }),
      e.useEffect(
        function () {
          var e = setInterval(function () {
            r.current();
          }, n);
          return function () {
            return clearInterval(e);
          };
        },
        [n],
      );
  })(function () {
    x();
  }, m),
    e.useEffect(
      function () {
        n.forEach(function (e) {
          new Image().src = e.src;
        });
      },
      [n],
    );
  var x = function () {
      if (s === n.length - 1) return h(0);
      h(s + 1);
    },
    k = function (e) {
      h(e), y(m - 1);
    };
  return o.default.createElement(
    D,
    null,
    o.default.createElement(
      I,
      { height: r },
      n.map(function (e, t) {
        return o.default.createElement(v, {
          active: t === s,
          src: e.src,
          key: e.id,
        });
      }),
    ),
    l
      ? o.default.createElement(
          S,
          null,
          n.map(function (e, t) {
            return o.default.createElement(A, {
              activeDotColor: i,
              dotColor: u,
              key: t,
              active: t === s,
              onClick: k,
              idx: t,
            });
          }),
        )
      : '',
    f
      ? o.default.createElement(w, {
          onPressPrev: function () {
            if (0 === s) return h(n.length - 1);
            h(s - 1), y(m + 1);
          },
          direction: p,
          height: r,
        })
      : '',
    f
      ? o.default.createElement(w, { onPressNext: x, direction: b, height: r })
      : '',
  );
}
(O.propTypes = {
  data: a.default.array.isRequired,
  height: a.default.number,
  interval: a.default.number,
  activeDotColor: a.default.string,
  dotColor: a.default.string,
  showDots: a.default.bool,
  enableNextAndPrev: a.default.bool,
}),
  (O.defaultProps = {
    data: [],
    height: 450,
    activeDotColor: '#e8784e',
    interval: 5e3,
    dotColor: '#909192',
    showDots: !0,
    enableNextAndPrev: !0,
  }),
  (module.exports = O);
